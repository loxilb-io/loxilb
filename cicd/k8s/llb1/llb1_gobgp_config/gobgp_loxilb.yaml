global:
  config:
    as: 64512
    router-id: 192.168.58.101
  apply-policy:
    config:
      export-policy-list:
        - set-next-hop-self
        - set-next-hop-vip
neighbors:
  - config:
      neighbor-address: 192.168.59.211
      peer-as: 64512
  - config:
      neighbor-address: 192.168.59.212
      peer-as: 64512
  - config:
      neighbor-address: 192.168.59.213
      peer-as: 64512
  - config:
      neighbor-address: 192.168.59.214
      peer-as: 64512
  - config:
      neighbor-address: 192.168.58.2
      peer-as: 65001
defined-sets:
  neighbor-sets:
    - neighbor-set-name: int
      neighbor-info-list:
        - 192.168.59.211
        - 192.168.59.212
        - 192.168.59.213
        - 192.168.59.214
    - neighbor-set-name: ext
      neighbor-info-list:
        - 192.168.58.2
policy-definitions:
  - name: set-next-hop-self
    statements:
      - conditions:
          match-neighbor-set:
            neighbor-set: int
        actions:
          bgp-actions:
            set-next-hop: 192.168.59.101
  - name: set-next-hop-vip
    statements:
      - conditions:
          match-neighbor-set:
            neighbor-set: ext
        actions:
          bgp-actions:
            set-next-hop: 192.168.58.150
